/*! power by xiu front end team  build by grunt   */
function reloadParent(){try{window.parent.opener.location.reload(),window.parent.close()}catch(a){var b=decodeURIComponent($.trim($("#parentPage").val()));""==b&&(b=$("#xiuIndex").val(),""==b&&(b="http://www.xiu.com")),window.parent.location=b}}function handleToUrlCookie(){var a=top.document.referrer;a=""==a?document.referrer:a,$.trim(a).length>0&&-1==$.trim(a).indexOf("login.xiu.com")&&$.cookie("toUrl",$.trim(a),{expires:1,path:"/",domain:".xiu.com",secure:!1})}function evalWCSJsonData(responseData){var o=eval(responseData);return o[0]}function autoLogin(a,b,c){$.cookie("xiu.login.tokenId")&&$.ajax({type:"POST",url:url.checkloginurl,data:"checkAutoLogin=true",success:function(a){var b=evalWCSJsonData(a);return b.errorMessage?void showErrDiv():void(b.isAlreadyLogin&&1==b.isAlreadyLogin&&(window.location.href="http://www.xiu.com"))},error:function(a){showErrDiv()}})}function showCheckCode(){$("#authcode_li").css("display","block"),"loginBox"==$("#loginBox").val()?$("#authCodeImg").attr("src",url.wcsurl+"kaptcha.jpg?random="+(new Date).getTime()):$("#authCodeImg").attr("src",url.wcsurl+"kaptcha.jpg?random="+(new Date).getTime()),$("#showCheckCode").attr("value","yes")}function xiuGroupShowCheckCode(){$("#xiuGroupCheckCodeLi").css("display","block"),"loginBox"==$("#loginBox").val()?$("#xiuGroupCheckCodeImg").attr("src",url.wcsurl+"kaptcha.jpg?random="+(new Date).getTime()):$("#xiuGroupCheckCodeImg").attr("src",url.wcsurl+"kaptcha.jpg?random="+(new Date).getTime()),$("#xiuGroupShowCheckCode").attr("value","yes")}function createQueryString(){var a=$.trim(document.getElementById("J_mobile").value),b=document.getElementById("J_autologin").checked,c=$("#loginDisplayType").val(),d="";"none"!=$("#authcode_li").css("display")&&(d=document.getElementById("J_auth_code").value),a=encodeURI(a);var e="userName="+a+"&isAutoLogin="+b+"&loginDisplayType="+c;if(c&&1==c){var f=document.getElementById("J_msgcode").value;e+="&authCode_phone="+f}else{var g=encodeURIComponent(document.getElementById("J_password").value);e+="&passWord="+g}return""!=d&&(e+="&checkCode="+d),e}function validateForm(){var a=$("#loginDisplayType").val(),b=!1,c=!1,d=!1;a&&1==a?(b=checkLoginName("submit"),c=!0,d=checkMobileCodeInput("submit")):(b=checkUserName("submit"),c=checkPasswordInput("submit"),d=!0);var e=checkCodeInput("submit");return 0==b||0==c||0==e||0==d?!1:!0}function checkMobileCodeInput(a){var b=!1,c=$("#J_msgcode"),d=c.parent().prev().children(".login-err-msg");return 0==$.trim(c.attr("value")).length?("submit"==a?(d.children("b").show(),d.children("span").text("请输入短信验证码")):(d.children("b").hide(),d.children("span").text("")),b=!1):""!=$.trim(c.attr("value"))&&$.trim(c.attr("value")).length>4?(d.children("b").show(),d.children("span").text("请输入有效的短信验证码"),b=!1):(d.children("b").hide(),d.children("span").text(""),b=!0),b}function checkCodeInput(a){var b=!1,c=$("#authcode_li").css("display"),d=$("#J_auth_code"),e=d.parent().prev().children(".login-err-msg");return"none"!=c&&0==$.trim(d.attr("value")).length?("submit"==a?(e.children("b").show(),e.children("span").text("请输入验证码")):(e.children("b").hide(),e.children("span").text("")),b=!1):"none"!=c&&""!=$.trim(d.attr("value"))&&$.trim(d.attr("value")).length>4?(e.children("b").show(),e.children("span").text("请输入验证码"),b=!1):(e.children("b").hide(),e.children("span").text(""),b=!0),b}function checkPasswordInput(a){var b=!1,c=$("#J_password"),d=c.parent().prev().children(".login-err-msg");return 0==c.val().length?("submit"==a?(d.children("b").show(),d.children("span").text(pwEmptyTip)):(d.children("b").hide(),d.children("span").text("")),b=!1):c.val().length<1||c.val().length>16?(d.children("b").show(),d.children("span").text("密码只能在6至16个字符之间"),b=!1):c.val().length!=$.trim(c.val()).length?(d.children("b").show(),d.children("span").text("密码不能以空格开始和结束"),b=!1):(d.children("b").hide(),d.children("span").text(""),b=!0),b}function checkLoginName(a){var b=$("#J_mobile"),c=b.parent().prev().children(".login-err-msg");return 0==$.trim(b.val()).length?("submit"==a?(c.children("b").show(),c.children("span").text("请输入手机号")):(c.children("b").hide(),c.children("span").text("")),!1):/^1[3458]{1}[0-9]{9}$/.test($.trim(b.val()))?(c.children("b").hide(),c.children("span").text(""),!0):(c.children("b").show(),c.children("span").text("手机号码格式错误！"),!1)}function checkUserName(a){var b=$("#J_mobile"),c=b.parent().prev().children(".login-err-msg");return 0==$.trim(b.val()).length?("submit"==a?(c.children("b").show(),c.children("span").text("请输入用户名")):(c.children("b").hide(),c.children("span").text("")),!1):$.trim(b.val()).length>50?(c.children("b").show(),c.children("span").text("用户名超出长度，只能包含50个字符"),!1):(c.children("b").hide(),c.children("span").text(""),!0)}function submit(a,b,c){if(validateForm()){if(!cookieEnable())return void $("#cookiesCloseErrDiv").css("display","block");var d=createQueryString();deleteWCSInvalidCookie(),$.ajax({type:"POST",url:url.wcsurl+"loginControlCmd?jsoncallback=",data:d,async:!1,beforeSend:function(){$("#wait").html().length<1&&$("#wait").html('数据加载中，请稍候<img src="https://login.xiu.com/assets/static/img/ajax-loader.gif"/>'),$("#wait").css("display","block")},success:loginCallBack,error:function(a){showErrDiv()},complete:function(){$("#wait").css("display","none")}})}}function cookieEnable(){var a=!1;if(navigator.cookiesEnabled)return!0;document.cookie="testcookie=yes;";var b=document.cookie;return b.indexOf("testcookie=yes")>-1&&(a=!0),document.cookie="",a}function closecookiesCloseErrDiv(){$("#cookiesCloseErrDiv").css("display","none")}function turnToOtherPage(){if("loginBox"==$("#loginBox").val())reloadParent();else{var a=($("#xiuIndex").val(),$.trim($("#forwordURL").val()));if(""!=a&&null!=a)a=handleWcsRedirect(a),window.location.href=a;else{var b=$("#rd").val();0==$.trim(b).length&&(b=$.trim($.cookie("toUrl"))),0==$.trim(b).length&&(b=$.trim(document.referrer)),0!=b.length?(-1==b.indexOf(".xiu.com")||-1!=b.indexOf("login.xiu.com"))&&(b=$("#xiuIndex").val()):b=$("#xiuIndex").val(),$.cookie("loginFailure",null,{expires:-1,path:"/",domain:".xiu.com",secure:!1}),$.cookie("toUrl",null,{expires:-1,path:"/",domain:".xiu.com",secure:!1}),window.location.href=b}}}function handleWcsRedirect(a){var b="http://"+UrlPathUtil.XIU_PORTAL_DOMAIN+$.trim(UrlPathUtil.getXiuCommandDir()+a);return-1!=a.indexOf("FirstPageCmd")&&(b="http://my.xiu.com"),b}function showNotice(a,b,c){var d=a.parent().prev().children(".login-err-msg");"err"==b&&(d.children("b").show(),d.children("span").text(c)),"ok"==b&&(d.children("b").hide(),d.children("span").text(""))}function loginCallBack(a){var b=evalWCSJsonData(a);if(b.errorCode)try{return void showErrDiv()}catch(c){return void alert("对不起，系统繁忙，请稍后再试！")}if("login.success"==b.loginResult)turnToOtherPage();else if("reg.failure"==b.loginResult)showNotice($("#J_mobile"),"err",b.regErrMsg),showCheckCode();else if("login.failure"==b.loginResult){showNotice($("#J_mobile"),"err",pwWrongTip);var d=$.trim($.cookie("loginFailure"));d=""==d?0:parseInt(d)+1,$.cookie("loginFailure",d,{expires:1,path:"/",domain:".xiu.com"}),("yes"==b.isDisplayCheckCode||"block"==$("#authcode_li").css("display")||d>=1)&&showCheckCode()}else if("invalidCheckCode"==b.loginResult)showCheckCode(),showNotice($("#J_auth_code"),"err","验证码错误！");else if("invalidMobileCode"==b.loginResult)showNotice($("#J_msgcode"),"err","短信验证码错误！");else if("login.inActivateUser"==b.loginResult){var e=$("#J_mobile").offset();xiuTips("该账户尚未激活！",e.left,e.top-93,8)}else if("login.lockUser"==b.loginResult)try{showAlertDiv()}catch(c){alert("对不起，因错误次数过多，该账号暂时被禁用！")}else if("login.thirdPartyUSer"==b.loginResult)showNotice($("#J_mobile"),"err","您是走秀合作网站用户，请通过合作网站登录走秀网吧！");else if("login.unauth"==b.loginResult)showNotice($("#J_mobile"),"err","该手机号未验证前不可用于登录，请使用原注册邮箱登录！");else try{showErrDiv()}catch(c){alert("对不起，系统繁忙，请稍后再试！")}}function changeCheckCodeImg(){$("#checkCodeImg").attr("src",url.wcsurl+"kaptcha.jpg?random="+(new Date).getTime())}function detectCapsLock(a){var b=a||window.event,c=(b.target||b.srcElement,$("#capLockId")),d=b.keyCode||b.which,e=b.shiftKey||16==d||!1;d>=65&&90>=d&&!e||d>=97&&122>=d&&e?(c.html().length<1&&c.html('<div class="popupDiv p1" style=" top:-35px;"><div class="M_infoTop"></div><div class="M_infocontents"><P>大写锁定打开，请注意大小写。</P></div></div>'),c.css("display","block"),setTimeout("hideCapLockTip()",8e3)):c.css("display","none")}function hideCapLockTip(){$("#capLockId").css("display","none")}function clearLoginNameTipTip(){$("#loginNameTip").html("&nbsp;")}function clearPasswordTipTip(){$("#passwordTip").html("&nbsp;")}function clearCheckCodeTipTip(){$("#checkCodeTip").html("&nbsp;")}function checkXiuGroupLoginName(a){var b=$("#xiuGroupLoginName"),c=b.val(),d=$("#xiuGroupLoginNameTip"),e=!1;return userNameTip==c&&(c=""),0==c.length?("submit"!=a?d.html("&nbsp;"):(b.addClass("txtecho cl_red"),d.html("<font color='red'>请输入用户名。</font>")),e=!1):e=!0,e}function checkxiuGroupPassword(a){var b=$("#xiuGroupPassword"),c=b.val(),d=$("#xiuGroupPasswordTip"),e=!1;return 0==c.length?("submit"!=a?d.html("&nbsp;"):(b.addClass("txtecho cl_red"),d.html("<font color='red'>"+pwEmptyTip+"</font>")),e=!1):c.length<1||c.length>16?(d.html("<font color='red'>密码只能在6至16个字符之间</font>"),b.removeClass().addClass("txtecho cl_red"),e=!1):c.length!=$.trim(c).length?(d.html("<font color='red'>密码不能以空格开始和结束</font>"),b.removeClass().addClass("txtecho cl_red"),e=!1):(d.html("&nbsp;"),e=!0),e}function checkxiuGroupCheckCode(a){var b=$("#xiuGroupCheckCodeLi");if("none"==b.css("display"))return!0;var c=$("#xiuGroupCheckCode"),d=c.val(),e=$("#xiuGroupCheckCodeTip"),f=!1;return 0==d.length||""==d?("submit"!=a?e.html("&nbsp;"):(c.addClass("txtecho cl_red"),e.html("<font color='red'>请输入验证码</font>")),f=!1):(e.html("&nbsp;"),f=!0),f}function validateXiuGroupForm(){var a=checkXiuGroupLoginName("submit"),b=checkxiuGroupPassword("submit"),c=checkxiuGroupCheckCode("submit");return a&&b&&c}function createXiuGroupQueryString(){var a=$.trim($("#xiuGroupLoginName").val()),b=encodeURIComponent($("#xiuGroupPassword").val()),c=!!$("#xiuGroupAutoLogin").attr("checked"),d=!!$("#xiuGroupRememberLoginName").attr("checked"),e="";"none"!=$("#xiuGroupCheckCodeLi").css("display")&&(e=$("#xiuGroupCheckCode").val()),a=encodeURI(a);var f="loginName="+a+"&passWord="+b+"&isAutoLogin="+c+"&rememberLoginName="+d;return""!=e&&(f+="&checkCode="+e),f+="&loginOrigin=xiuGroup"}function submitXiuGroup(a,b,c){if(validateXiuGroupForm()){if(!cookieEnable())return void $("#cookiesCloseErrDiv").css("display","block");var d=createXiuGroupQueryString();deleteWCSInvalidCookie(),$.ajax({type:"POST",url:url.wcsurl+"loginControlCmd?jsoncallback=",data:d,async:!1,beforeSend:function(){$("#xiuGroupWait").html().length<1&&$("#xiuGroupWait").html('数据加载中，请稍候<img src="https://login.xiu.com/assets/static/img/ajax-loader.gif"/>'),$("#xiuGroupWait").css("display","block")},success:xiuGroupLoginCallback,error:function(a){showErrDiv()},complete:function(){$("#xiuGroupWait").css("display","none")}})}}function xiuGroupLoginCallback(a){var b=evalWCSJsonData(a);if(b.errorCode)return void showErrDiv();if("login.success"==b.loginResult)turnToOtherPage();else if("login.failure"==b.loginResult){var c="";b.allowedCnt&&(c="<font color='red'>您还有"+b.allowedCnt+"次机会。</font>"),$("#xiuGroupPasswordTip").css("display","block").html(xtPwWrongTip+xtGetPw),("yes"==b.isDisplayCheckCode||"block"==$("#xiuGroupCheckCodeLi").css("display"))&&xiuGroupShowCheckCode()}else if("invalidCheckCode"==b.loginResult)xiuGroupShowCheckCode(),$("#xiuGroupCheckCodeTip").css("display","block").html("<font color='red'>验证码错误</font>"),$("#xiuGroupCheckCode").removeClass().addClass("txtecho cl_red");else if("login.inActivateUser"==b.loginResult)alert("该账户尚未激活！请到注册确认邮件中激活账户，或者重发确认邮件。");else if("login.lockUser"==b.loginResult)try{showAlertDiv()}catch(d){alert("对不起，因错误次数过多，该账号暂时被禁用！")}else if("login.thirdPartyUSer"==b.loginResult)$("#xiuGroupLoginName").html("<font color='red'>您是走秀合作网站用户，请通过合作网站登录走秀网吧！</font>");else try{showErrDiv()}catch(d){alert("对不起，系统繁忙，请稍后再试！")}}function bindLoginEvent(){$("#loginName").bind("focus",function(){$("#loginName").removeClass().addClass("txtecho cl_orange"),clearLoginNameTipTip()}),$("#loginName").bind("blur",function(){$("#loginName").removeClass().addClass("txtecho"),checkLoginName()}),$("#passWord").bind("focus",function(){$("#passWord").removeClass().addClass("txtecho cl_orange")}),$("#passWord").bind("blur",function(){$("#passWord").removeClass().addClass("txtecho"),$("#capLockId").css("display","none"),checkPasswordInput()}),$("#checkCode").bind("focus",function(){$("#checkCode").removeClass().addClass("txtecho cl_orange"),$("#checkCodeTip").html("请填入阿拉伯数字答案！")}),$("#checkCode").bind("blur",function(){$("#checkCode").removeClass().addClass("txtecho"),checkCodeInput()}),$("#passWord").bind("click",clearPasswordTipTip),$("#passWord").bind("keypress",detectCapsLock),$("#changeChkCd").bind("click",showCheckCode),$("#checkCodeImg").bind("click",showCheckCode)}function findWCSInvalidCookie(a){var b=new Array,c=0;if(document.cookie&&""!=document.cookie)for(var d=document.cookie.split(";"),e=0;e<d.length;e++){var f=$.trim(d[e]);if(-1!=f.indexOf(a)){var g=f.indexOf("=");b[c++]=$.trim(f.substring(0,g))}}return b}function deleteWCSInvalidCookie(){try{var a=$.trim($.cookie("WC_USERACTIVITY_-1002"));if(null!=a&&""!=a){var b=findWCSInvalidCookie("WC_");for(i=0;i<b.length;i++)$.cookie(b[i],null,{expires:-1,path:"/",domain:".xiu.com",secure:!1})}}catch(c){}}window!=top&&(top.location.href=location.href);var userNameTip="手机号/邮箱/昵称",pwEmptyTip="密码不能为空！请输入用户密码。",pwWrongTip="抱歉，密码与用户名不匹配。请您核对后再次输入。",xtPwWrongTip="抱歉，密码与用户名不匹配。请您核对后再次输入。",getPw="(<a href='http://login.xiu.com/retrivepwd' class='blue' target='_blank'>点击这里找回密码</a>)",xtGetPw="(<a href='http://www.xiutuan.com/account/repass.php' target='_blank' class='blue'>点击这里找回密码</a>)";$(function(){$(document).unbind("keydown.loginPage").bind("keydown.loginPage",function(a){13==a.keyCode&&("block"==$("#tab_0").css("display")?$("#loginBtn").click():"block"==$("#tab_1").css("display")&&$("#xiuGroupLoginBtn").click())})}),$(document).ready(function(){if("alreadyInvalid"==$("#emailRegResult").val())return void alert("对不起，注册链接已失效！");$("#loginName").bind("click",function(){this.value==userNameTip&&(this.value=""),$("#loginName").unbind("click")});var a=$.trim($("#xiuLoginName").val());0!=a.length&&$("#loginName").attr("value",a);var b=$.cookie("xiu.login.showCheckCd"),c=$.trim($.cookie("loginFailure"));c=""==c?0:parseInt(c),(null!=b&&"yes"==b||c>=3)&&(showCheckCode(),xiuGroupShowCheckCode())}),$("#xiuGroupLoginName").bind("focus",function(){$("#xiuGroupLoginName").removeClass().addClass("txtecho cl_orange"),$("#xiuGroupLoginNameTip").html("&nbsp;")}),$("#xiuGroupLoginName").bind("blur",function(){$("#xiuGroupLoginName").removeClass().addClass("txtecho"),checkXiuGroupLoginName()}),$("#xiuGroupPassword").bind("focus",function(){$("#xiuGroupPassword").removeClass().addClass("txtecho cl_orange"),$("#xiuGroupPasswordTip").html("&nbsp;")}),$("#xiuGroupPassword").bind("blur",function(){$("#xiuGroupPassword").removeClass().addClass("txtecho"),checkxiuGroupPassword()}),$("#xiuGroupCheckCode").bind("focus",function(){$("#xiuGroupCheckCode").removeClass().addClass("txtecho cl_orange"),$("#xiuGroupCheckCodeTip").html("请填入阿拉伯数字答案！")}),$("#xiuGroupCheckCode").bind("blur",function(){$("#xiuGroupCheckCode").removeClass().addClass("txtecho"),checkxiuGroupCheckCode()}),$("#xiuGroupCheckCodeImg").bind("click",xiuGroupShowCheckCode),$("#xiuGroupChangeChkCd").bind("click",xiuGroupShowCheckCode);